<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AresNyX Boxer Shorts</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin:0; padding:0;
  background-color:#f4f4f4;
}
header {
  background-color:#000;
  color:#FFD700; /* zlatna */
  padding:20px;
  text-align:center;
}
.product-list {
  display:flex;
  flex-direction:column;
  gap:20px;
  padding:20px;
}
.product {
  background:#fff;
  padding:15px;
  display:flex;
  flex-direction:row;
  align-items:center;
  gap:15px;
  border-radius:5px;
}
.product img {
  width:120px;
  height:120px;
  object-fit:cover;
}
.product-info {
  flex:1;
}
.product-info h2 {
  margin:0 0 5px 0;
  color:#FFD700;
}
.product-info p {
  margin:3px 0;
}
.size-options label {
  margin-right:10px;
}
button {
  cursor:pointer;
  padding:5px 10px;
  margin-top:5px;
}
.cart-icon {
  position:fixed;
  top:20px;
  right:20px;
  background:#FFD700;
  color:#000;
  padding:10px;
  border-radius:50%;
  cursor:pointer;
}
#cart-modal {
  display:none;
  position:fixed;
  top:0; left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.7);
  justify-content:center;
  align-items:center;
}
#cart-content {
  background:#fff;
  width:90%;
  max-width:800px;
  max-height:90%;
  overflow:auto;
  padding:20px;
  border-radius:10px;
  position:relative;
}
#cart-content table {
  width:100%;
  border-collapse:collapse;
}
#cart-content th, td {
  border:1px solid #ccc;
  padding:5px;
  text-align:center;
}
#cart-content button.close-cart {
  position:absolute;
  top:10px;
  right:10px;
  background:red;
  color:#fff;
  border:none;
  padding:5px 10px;
  border-radius:5px;
}
.popup {
  display:none;
  position:absolute;
  background:#fff;
  border:1px solid #ccc;
  padding:10px;
  border-radius:5px;
  z-index:10;
}
.back-button {
  display:block;
  margin:20px auto;
  text-align:center;
  background:#000;
  color:#fff;
  padding:10px 15px;
  border-radius:5px;
  text-decoration:none;
}
</style>
</head>
<body>

<header>
  <h1>AresNyX Boxer Shorts</h1>
</header>

<div class="product-list" id="product-list">
  <!-- Proizvodi ƒáe se ubaciti kroz JS -->
</div>

<div class="cart-icon" id="cart-icon">üõí</div>

<div id="cart-modal">
  <div id="cart-content">
    <button class="close-cart" id="close-cart">X</button>
    <h2>Va≈°a korpa</h2>
    <table id="cart-table">
      <thead>
        <tr>
          <th>Proizvod</th>
          <th>Veliƒçina</th>
          <th>Koliƒçina</th>
          <th>Cena</th>
          <th>Vrednost</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <p id="cart-summary"></p>
    <button id="empty-cart">Isprazni korpu</button>
    <button id="checkout">Potvrdi porud≈æbinu</button>
  </div>
</div>

<a href="javascript:history.back()" class="back-button">‚Üê Vrati se na prethodnu stranu</a>

<script>
// Definisanje proizvoda
const products = [
  {id:1,name:"AresNyX Boxer Shorts Blue",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:2,name:"AresNyX Boxer Shorts Navy",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:3,name:"AresNyX Boxer Shorts Grey",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:4,name:"AresNyX Boxer Shorts Striped Blue",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:5,name:"AresNyX Boxer Shorts Striped Grey",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:6,name:"AresNyX Boxer Shorts Striped",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:7,name:"AresNyX Boxer Shorts Black",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
  {id:8,name:"AresNyX Boxer Shorts White",price:1300,material:"100% pamuk",img:"https://via.placeholder.com/120",img2:"https://via.placeholder.com/120?text=2"},
];

let cart = [];

function renderProducts() {
  const list = document.getElementById('product-list');
  products.forEach(p=>{
    const div = document.createElement('div');
    div.className='product';
    div.innerHTML = `
      <img src="${p.img}" onmouseover="this.src='${p.img2}'" onmouseout="this.src='${p.img}'">
      <div class="product-info">
        <h2>${p.name}</h2>
        <p>${p.material}</p>
        <div class="size-options">
          <label><input type="radio" name="size-${p.id}" value="M" checked> M</label>
          <label><input type="radio" name="size-${p.id}" value="L"> L</label>
          <label><input type="radio" name="size-${p.id}" value="XL"> XL</label>
          <label><input type="radio" name="size-${p.id}" value="XXL"> XXL</label>
        </div>
        <label>Koliƒçina: <input type="number" id="qty-${p.id}" value="1" min="1" style="width:50px"></label>
        <button onclick="addToCart(${p.id})">Dodaj u korpu</button>
      </div>
    `;
    list.appendChild(div);
  });
}

function addToCart(id){
  const product = products.find(p=>p.id===id);
  const size = document.querySelector(`input[name="size-${id}"]:checked`).value;
  const qty = parseInt(document.getElementById(`qty-${id}`).value);
  // Provera da li postoji veƒá u korpi sa istom veliƒçinom
  const existing = cart.find(c=>c.id===id && c.size===size);
  if(existing){
    existing.qty = qty; // poslednje stanje
  } else {
    cart.push({...product,qty,size});
  }
  renderCart();
}

function renderCart(){
  const tbody = document.querySelector('#cart-table tbody');
  tbody.innerHTML='';
  let total=0;
  cart.forEach(item=>{
    let value = item.price*item.qty;
    total+=value;
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${item.name}</td><td>${item.size}</td><td>${item.qty}</td><td>${item.price}</td><td>${value}</td>`;
    tbody.appendChild(tr);
  });
  // Pravila po≈°tarina i popust
  let shipping = 400;
  let discount = 0;
  const totalQty = cart.reduce((a,b)=>a+b.qty,0);
  if(totalQty>=5) shipping=0;
  if(totalQty>=7){
    discount = 0.1;
    total = total*(1-discount);
    shipping=0;
  }
  document.getElementById('cart-summary').innerText=`Ukupno: ${total} RSD | Po≈°tarina: ${shipping} RSD ${discount>0? "| Popust 10%":""}`;
  document.getElementById('cart-modal').style.display='flex';
}

document.getElementById('cart-icon').addEventListener('click',()=>{
  document.getElementById('cart-modal').style.display='flex';
});
document.getElementById('close-cart').addEventListener('click',()=>{
  document.getElementById('cart-modal').style.display='none';
});
document.getElementById('empty-cart').addEventListener('click',()=>{
  cart=[];
  renderCart();
});
document.getElementById('checkout').addEventListener('click',()=>{
  alert("Porud≈æbina potvrƒëena! (Ovde ide integracija EmailJS ili server)");
});

renderProducts();
</script>
</body>
</html>
